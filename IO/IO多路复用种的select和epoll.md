# IO多路复用种的select和epoll

参考：https://blog.csdn.net/davidsguo008/article/details/73556811

**<font color='blue' size=5>注意，这不是多线程，可以说是单线程的“多路复用”</font>**

------

- select：
  - **将文件描述符放入一个集合中，调用select时，将这个集合从==用户空间拷贝到内核空间==（缺点1：每次都要复制，开销大）**；
  - ==采用水平触发机制==。select函数返回后，需要通过==遍历这个集合，找到就绪的文件描述符==（缺点3：轮询的方式效率较低），当文件描述符的数量增加时，效率会线性下降；
- poll：==和select几乎没有区别==，区别在于文件描述符的存储方式不同，poll采用链表的方式存储，没有最大存储数量的限制；
- epoll：
  - 通过==**内核和用户空间共享内存，避免了不断复制的问题**==；
  - 支持的同时连接数上限很高（1G左右的内存支持10W左右的连接数）；
  - ==**文件描述符就绪时，采用回调机制，避免了轮询**==（回调函数将就绪的描述符添加到一个链表中，执行epoll_wait时，返回这个链表）；
  - 支持水平触发和边缘触发，采用边缘触发机制时，只有活跃的描述符才会触发回调函数。

