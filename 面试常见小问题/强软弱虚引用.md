# 强/软/弱/虚引用

https://mp.weixin.qq.com/s/K1XMtzUv8NSaKbsXJoNeqQ



**通过虚引用来获取对一个对象的真实引用。**

> **虚引用**顾名思义，就是**形同虚设**。与其他几种引用都不同，**虚引用**并**不会**决定对象的**生命周期**。如果一个对象**仅持有虚引用**，那么它就和**没有任何引用**一样，在任何时候都可能被垃圾回收器回收。
>
> **应用场景：**
>
> **虚引用**主要用来**跟踪对象**被垃圾回收器**回收**的活动。 **虚引用**与**软引用**和**弱引用**的一个区别在于：
>
> > <font color='red'>**虚引用必须和引用队列(ReferenceQueue)联合使用。当垃圾回收器准备回收一个对象时，如果发现它还有虚引用，就会在回收对象的内存之前，把这个虚引用加入到与之关联的引用队列中。**</font>
>
> ```java
> String str = new String("abc");
> ReferenceQueue queue = new ReferenceQueue();
> // 创建虚引用，要求必须与一个引用队列关联
> PhantomReference pr = new PhantomReference(str, queue);
> ```
> 
><font color='red'>**程序可以通过判断引用队列中是否已经加入了虚引用，来了解被引用的对象是否将要进行垃圾回收。==如果程序发现某个虚引用已经被加入到引用队列，那么就可以在所引用的对象的内存被回收之前采取必要的行动==。**</font>

